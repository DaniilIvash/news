<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta charset="UTF-8">
    <title th:text="${title}">–ö–æ–Ω—Ç–∞–∫—Ç—ã</title>
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 0;
            color: #333;
            background-color: white;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }

        .header {
            background-color: #2c3e50;
            color: white;
            padding: 1rem 2rem;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            z-index: 1000;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }

        .header-left {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .header-right {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .logo {
            height: 60px;
            width: auto;
        }

        .site-title {
            font-size: 1.8rem;
            font-weight: bold;
            margin: 0;
            font-family: 'Times New Roman', Times, serif;
        }

        .menu-button {
            background: none;
            border: none;
            color: white;
            font-size: 1.5rem;
            cursor: pointer;
            display: flex;
            flex-direction: column;
            gap: 4px;
        }

        .menu-button span {
            display: block;
            width: 25px;
            height: 3px;
            background-color: white;
        }

        .auth-button {
            background: none;
            border: 1px solid white;
            color: white;
            padding: 0.5rem 1rem;
            border-radius: 5px;
            cursor: pointer;
            font-size: 0.9rem;
            transition: background-color 0.3s;
        }

        .auth-button:hover {
            background-color: rgba(255, 255, 255, 0.1);
        }

        .menu {
            position: fixed;
            top: 60px;
            right: 20px;
            background-color: #2c3e50;
            color: white;
            padding: 1rem;
            border-radius: 5px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);
            display: none;
            z-index: 1001;
            width: 200px;
        }

        .menu.show {
            display: block;
        }

        .menu-item {
            padding: 0.5rem;
            cursor: pointer;
            border-bottom: 1px solid rgba(255, 255, 255, 0.2);
        }

        .menu-item:hover {
            background-color: rgba(255, 255, 255, 0.1);
        }

        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.7);
            z-index: 1002;
            justify-content: center;
            align-items: center;
        }

        .modal.show {
            display: flex;
        }

        .modal-content {
            background-color: white;
            padding: 2rem;
            border-radius: 10px;
            max-width: 500px;
            width: 90%;
            max-height: 80vh;
            overflow-y: auto;
        }

        .modal-content h2 {
            margin-top: 0;
            color: #2c3e50;
        }

        .close-button {
            position: absolute;
            top: 1rem;
            right: 1rem;
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
        }

        .select-container {
            margin-bottom: 1rem;
        }

        .select-container select {
            padding: 0.5rem;
            width: 100%;
            border-radius: 5px;
            border: 1px solid #ccc;
        }

        .chart-container {
            height: 300px;
            margin-bottom: 1rem;
        }

        .content {
            background-color: white;
            border-radius: 10px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            margin: 4rem auto 2rem;
            padding: 2rem;
            max-width: 800px;
            flex: 1;
        }

        .content h2 {
            margin-top: 0;
            color: #2c3e50;
        }

        .content p {
            line-height: 1.6;
            margin-bottom: 1.5rem;
        }

        .back-link {
            color: #3498db;
            text-decoration: none;
            font-weight: bold;
            display: inline-block;
            margin-top: 1rem;
        }

        .back-link:hover {
            text-decoration: underline;
        }

        .auth-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.7);
            z-index: 1003;
            justify-content: center;
            align-items: center;
        }

        .auth-modal.show {
            display: flex;
        }

        .auth-modal-content {
            background-color: white;
            padding: 2rem;
            border-radius: 10px;
            max-width: 400px;
            width: 90%;
            max-height: 80vh;
            overflow-y: auto;
            position: relative;
        }

        .auth-modal-content h2 {
            margin-top: 0;
            color: #2c3e50;
            text-align: center;
        }

        .auth-tabs {
            display: flex;
            margin-bottom: 1.5rem;
            border-bottom: 1px solid #ddd;
        }

        .auth-tab {
            flex: 1;
            padding: 0.75rem;
            text-align: center;
            cursor: pointer;
            border-bottom: 2px solid transparent;
            color: #7f8c8d;
        }

        .auth-tab.active {
            color: #2c3e50;
            border-bottom: 2px solid #3498db;
        }

        .auth-form {
            display: none;
        }

        .auth-form.active {
            display: block;
        }

        .form-group {
            margin-bottom: 1rem;
        }

        .form-group label {
            display: block;
            margin-bottom: 0.5rem;
            color: #2c3e50;
        }

        .form-group input {
            width: 100%;
            padding: 0.75rem;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-size: 1rem;
        }

        .form-group input:focus {
            border-color: #3498db;
            outline: none;
        }

        .submit-button {
            width: 100%;
            padding: 0.75rem;
            background-color: #3498db;
            color: white;
            border: none;
            border-radius: 5px;
            font-size: 1rem;
            cursor: pointer;
            transition: background-color 0.3s;
        }

        .submit-button:hover {
            background-color: #2980b9;
        }

        .switch-auth {
            text-align: center;
            margin-top: 1rem;
            color: #7f8c8d;
        }

        .switch-auth a {
            color: #3498db;
            text-decoration: none;
        }

        .switch-auth a:hover {
            text-decoration: underline;
        }

        .user-profile {
            display: flex;
            align-items: center;
            gap: 10px;
            color: white;
            font-size: 0.9rem;
            cursor: pointer;
        }

        .user-profile:hover {
            opacity: 0.8;
        }

        .user-avatar {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            background-color: #3498db;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
        }

        .logout-button {
            background: none;
            border: 1px solid white;
            color: white;
            padding: 0.5rem 1rem;
            border-radius: 5px;
            cursor: pointer;
            font-size: 0.9rem;
            transition: background-color 0.3s;
        }

        .logout-button:hover {
            background-color: rgba(255, 255, 255, 0.1);
        }

        .auth-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.7);
            z-index: 1003;
            justify-content: center;
            align-items: center;
        }

        .auth-modal.show {
            display: flex;
        }

        .auth-modal-content {
            background-color: white;
            padding: 2rem;
            border-radius: 10px;
            max-width: 400px;
            width: 90%;
            max-height: 80vh;
            overflow-y: auto;
            position: relative;
        }

        .auth-modal-content h2 {
            margin-top: 0;
            color: #2c3e50;
            text-align: center;
        }

        .auth-tabs {
            display: flex;
            margin-bottom: 1.5rem;
            border-bottom: 1px solid #ddd;
        }

        .auth-tab {
            flex: 1;
            padding: 0.75rem;
            text-align: center;
            cursor: pointer;
            border-bottom: 2px solid transparent;
            color: #7f8c8d;
        }

        .auth-tab.active {
            color: #2c3e50;
            border-bottom: 2px solid #3498db;
        }

        .auth-form {
            display: none;
        }

        .auth-form.active {
            display: block;
        }

        .form-group {
            margin-bottom: 1rem;
        }

        .form-group label {
            display: block;
            margin-bottom: 0.5rem;
            color: #2c3e50;
        }

        .form-group input {
            width: 100%;
            padding: 0.75rem;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-size: 1rem;
        }

        .form-group input:focus {
            border-color: #3498db;
            outline: none;
        }

        .submit-button {
            width: 100%;
            padding: 0.75rem;
            background-color: #3498db;
            color: white;
            border: none;
            border-radius: 5px;
            font-size: 1rem;
            cursor: pointer;
            transition: background-color 0.3s;
        }

        .submit-button:hover {
            background-color: #2980b9;
        }

        .switch-auth {
            text-align: center;
            margin-top: 1rem;
            color: #7f8c8d;
        }

        .switch-auth a {
            color: #3498db;
            text-decoration: none;
        }

        .switch-auth a:hover {
            text-decoration: underline;
        }

        .update-button {
            background-color: #3498db;
            color: white;
            border: none;
            padding: 0.5rem 1rem;
            border-radius: 5px;
            cursor: pointer;
            font-size: 0.9rem;
            margin-top: 1rem;
            transition: background-color 0.3s;
        }

        .update-button:hover {
            background-color: #2980b9;
        }
    </style>
</head>
<body>
<div class="header">
    <div class="header-left">
        <img src="/logo.png" alt="–õ–æ–≥–æ—Ç–∏–ø" class="logo">
        <div class="site-title">–û–Ω–ª–∞–π–Ω –ù–æ–≤–æ—Å—Ç–∏</div>
    </div>
    <div class="header-right" id="headerRight">
        <!-- –ö–Ω–æ–ø–∫–∏ –≤—Ö–æ–¥–∞ –∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª–µ–Ω—ã –∏–ª–∏ –∑–∞–º–µ–Ω–µ–Ω—ã –Ω–∞ –ø—Ä–æ—Ñ–∏–ª—å —á–µ—Ä–µ–∑ JavaScript -->
    </div>
</div>

<div class="menu" id="menu">
    <div class="menu-item" onclick="openModal('currency')">–ö—É—Ä—Å –≤–∞–ª—é—Ç</div>
    <div class="menu-item" onclick="openModal('weather')">–ü—Ä–æ–≥–Ω–æ–∑ –ø–æ–≥–æ–¥—ã</div>
    <div class="menu-item" onclick="filterNews('–°–ø–æ—Ä—Ç')">–°–ø–æ—Ä—Ç</div>
    <div class="menu-item" onclick="filterNews('–≠–∫–æ–Ω–æ–º–∏–∫–∞')">–≠–∫–æ–Ω–æ–º–∏–∫–∞</div>
    <div class="menu-item" onclick="filterNews('–ü–æ–ª–∏—Ç–∏–∫–∞')">–ü–æ–ª–∏—Ç–∏–∫–∞</div>
    <div class="menu-item" onclick="filterNews('–¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏')">–¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏</div>
    <div class="menu-item" onclick="filterNews('–ù–∞—É–∫–∞')">–ù–∞—É–∫–∞</div>
    <div class="menu-item" onclick="filterNews('–û–±—â–µ—Å—Ç–≤–æ')">–û–±—â–µ—Å—Ç–≤–æ</div>
    <div class="menu-item" onclick="filterNews('–ö—É–ª—å—Ç—É—Ä–∞')">–ö—É–ª—å—Ç—É—Ä–∞</div>
    <div class="menu-item" onclick="filterNews('–≠–∫–æ–ª–æ–≥–∏—è')">–≠–∫–æ–ª–æ–≥–∏—è</div>
    <div class="menu-item" onclick="filterNews('–û–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ')">–û–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ</div>
    <div class="menu-item" onclick="filterNews('')">–í—Å–µ –Ω–æ–≤–æ—Å—Ç–∏</div>
</div>

<div class="modal" id="currencyModal">
    <div class="modal-content">
        <button class="close-button" onclick="closeModal('currency')">&times;</button>
        <h2>–ö—É—Ä—Å –≤–∞–ª—é—Ç</h2>
        <div class="select-container">
            <select id="currencySelect" onchange="updateCurrencyData()">
                <option value="USD">–î–æ–ª–ª–∞—Ä –°–®–ê (USD)</option>
                <option value="EUR">–ï–≤—Ä–æ (EUR)</option>
                <option value="GBP">–ë—Ä–∏—Ç–∞–Ω—Å–∫–∏–π —Ñ—É–Ω—Ç (GBP)</option>
                <option value="CNY">–ö–∏—Ç–∞–π—Å–∫–∏–π —é–∞–Ω—å (CNY)</option>
            </select>
        </div>
        <div id="currencyData">
            <p id="currencyDate">–ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö...</p>
            <p>USD: <span id="usdRate">–ó–∞–≥—Ä—É–∑–∫–∞...</span></p>
            <p>EUR: <span id="eurRate">–ó–∞–≥—Ä—É–∑–∫–∞...</span></p>
            <p>GBP: <span id="gbpRate">–ó–∞–≥—Ä—É–∑–∫–∞...</span></p>
            <p>CNY: <span id="cnyRate">–ó–∞–≥—Ä—É–∑–∫–∞...</span></p>
        </div>
        <button onclick="updateCurrencyData()" class="update-button">–û–±–Ω–æ–≤–∏—Ç—å –¥–∞–Ω–Ω—ã–µ</button>
    </div>
</div>

<div class="modal" id="weatherModal">
    <div class="modal-content">
        <button class="close-button" onclick="closeModal('weather')">&times;</button>
        <h2>–ü—Ä–æ–≥–Ω–æ–∑ –ø–æ–≥–æ–¥—ã</h2>
        <div class="select-container">
            <select id="citySelect" onchange="updateWeatherData()">
                <option value="moscow">–ú–æ—Å–∫–≤–∞</option>
                <option value="spb">–°–∞–Ω–∫—Ç-–ü–µ—Ç–µ—Ä–±—É—Ä–≥</option>
                <option value="novosibirsk">–ù–æ–≤–æ—Å–∏–±–∏—Ä—Å–∫</option>
                <option value="yekaterinburg">–ï–∫–∞—Ç–µ—Ä–∏–Ω–±—É—Ä–≥</option>
            </select>
        </div>
        <div id="weatherData">
            <p id="weatherDate">–ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö...</p>
            <p>–ú–æ—Å–∫–≤–∞: <span id="moscowWeather">–ó–∞–≥—Ä—É–∑–∫–∞...</span></p>
            <p>–°–∞–Ω–∫—Ç-–ü–µ—Ç–µ—Ä–±—É—Ä–≥: <span id="spbWeather">–ó–∞–≥—Ä—É–∑–∫–∞...</span></p>
            <p>–ù–æ–≤–æ—Å–∏–±–∏—Ä—Å–∫: <span id="novosibirskWeather">–ó–∞–≥—Ä—É–∑–∫–∞...</span></p>
            <p>–ï–∫–∞—Ç–µ—Ä–∏–Ω–±—É—Ä–≥: <span id="yekaterinburgWeather">–ó–∞–≥—Ä—É–∑–∫–∞...</span></p>
        </div>
        <button onclick="updateWeatherData()" class="update-button">–û–±–Ω–æ–≤–∏—Ç—å –¥–∞–Ω–Ω—ã–µ</button>
    </div>
</div>

<div class="auth-modal" id="authModal">
    <div class="auth-modal-content">
        <button class="close-button" onclick="closeAuthModal()">&times;</button>
        <h2 id="authModalTitle">–í—Ö–æ–¥</h2>
        <div class="auth-tabs">
            <div class="auth-tab active" onclick="showAuthTab('login')">–í—Ö–æ–¥</div>
            <div class="auth-tab" onclick="showAuthTab('register')">–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</div>
        </div>
        <form id="loginForm" class="auth-form active" onsubmit="handleLogin(event)">
            <div class="form-group">
                <label for="loginEmail">Email</label>
                <input type="email" id="loginEmail" required>
            </div>
            <div class="form-group">
                <label for="loginPassword">–ü–∞—Ä–æ–ª—å</label>
                <input type="password" id="loginPassword" required>
            </div>
            <button type="submit" class="submit-button">–í–æ–π—Ç–∏</button>
            <div class="switch-auth">
                –ù–µ—Ç –∞–∫–∫–∞—É–Ω—Ç–∞? <a onclick="showAuthTab('register')">–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è</a>
            </div>
        </form>
        <form id="registerForm" class="auth-form" onsubmit="handleRegister(event)">
            <div class="form-group">
                <label for="registerName">–ò–º—è</label>
                <input type="text" id="registerName" required>
            </div>
            <div class="form-group">
                <label for="registerEmail">Email</label>
                <input type="email" id="registerEmail" required>
            </div>
            <div class="form-group">
                <label for="registerPassword">–ü–∞—Ä–æ–ª—å</label>
                <input type="password" id="registerPassword" required>
            </div>
            <div class="form-group">
                <label for="registerConfirmPassword">–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å</label>
                <input type="password" id="registerConfirmPassword" required>
            </div>
            <button type="submit" class="submit-button">–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è</button>
            <div class="switch-auth">
                –£–∂–µ –µ—Å—Ç—å –∞–∫–∫–∞—É–Ω—Ç? <a onclick="showAuthTab('login')">–í–æ–π—Ç–∏</a>
            </div>
        </form>
    </div>
</div>

<div class="content">
    <h2>–ö–æ–Ω—Ç–∞–∫—Ç—ã</h2>
    <p>–ï—Å–ª–∏ —É –≤–∞—Å –µ—Å—Ç—å –≤–æ–ø—Ä–æ—Å—ã –∏–ª–∏ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è, –≤—ã –º–æ–∂–µ—Ç–µ —Å–≤—è–∑–∞—Ç—å—Å—è —Å –Ω–∞–º–∏:</p>
    <p>Email: info@onlinenews.ru</p>
    <p>–¢–µ–ª–µ—Ñ–æ–Ω: +7 (123) 456-78-90</p>
    <p>–ê–¥—Ä–µ—Å: –≥. –ú–æ—Å–∫–≤–∞, —É–ª. –ù–æ–≤–æ—Å—Ç–µ–π, –¥. 1</p>
    <a th:href="@{/}" class="back-link">–í–µ—Ä–Ω—É—Ç—å—Å—è –Ω–∞ –≥–ª–∞–≤–Ω—É—é</a>
</div>

<script>
    let currentUser = null;
    let currencyChart = null;
    let weatherChart = null;

    // –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ª–∏—á–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ localStorage –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
    document.addEventListener('DOMContentLoaded', function() {
        const userData = localStorage.getItem('currentUser');
        if (userData) {
            currentUser = JSON.parse(userData);
            updateHeaderForUser();
        } else {
            updateHeaderForGuest();
        }

        // –ù–∞–∑–Ω–∞—á–∞–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π –¥–ª—è –∫–Ω–æ–ø–æ–∫ –º–µ–Ω—é –∏ –º–æ–¥–∞–ª—å–Ω—ã—Ö –æ–∫–æ–Ω
        setupEventListeners();
    });

    function setupEventListeners() {
        const menuButton = document.getElementById('menuButton');
        const loginButton = document.getElementById('loginButton');
        const registerButton = document.getElementById('registerButton');
        const logoutButton = document.getElementById('logoutButton');

        if (menuButton) {
            menuButton.addEventListener('click', toggleMenu);
        }

        if (loginButton) {
            loginButton.addEventListener('click', () => showAuthModal('login'));
        }

        if (registerButton) {
            registerButton.addEventListener('click', () => showAuthModal('register'));
        }

        if (logoutButton) {
            logoutButton.addEventListener('click', handleLogout);
        }
    }

    function toggleMenu() {
        const menu = document.getElementById('menu');
        menu.classList.toggle('show');
    }

    function openModal(modalId) {
        const modal = document.getElementById(modalId + 'Modal');
        const menu = document.getElementById('menu');
        const authModal = document.getElementById('authModal');

        if (modal) {
            modal.classList.add('show');
        }

        if (menu && menu.classList.contains('show')) {
            menu.classList.remove('show');
        }

        if (authModal && authModal.classList.contains('show')) {
            closeAuthModal();
        }

        if (modalId === 'currency' && modal) {
            updateCurrencyData();
        } else if (modalId === 'weather' && modal) {
            updateWeatherData();
        }
    }

    function closeModal(modalId) {
        const modal = document.getElementById(modalId + 'Modal');
        if (modal) {
            modal.classList.remove('show');
        }
    }

    function closeAuthModal() {
        const authModal = document.getElementById('authModal');
        if (authModal) {
            authModal.classList.remove('show');
        }
    }

    function showAuthModal(tab) {
        const authModal = document.getElementById('authModal');
        if (authModal) {
            authModal.classList.add('show');
            showAuthTab(tab);
        }
    }

    function showAuthTab(tab) {
        const loginForm = document.getElementById('loginForm');
        const registerForm = document.getElementById('registerForm');
        const loginTab = document.querySelector('.auth-tab:nth-child(1)');
        const registerTab = document.querySelector('.auth-tab:nth-child(2)');

        if (tab === 'login') {
            loginForm.classList.add('active');
            registerForm.classList.remove('active');
            loginTab.classList.add('active');
            registerTab.classList.remove('active');
            document.getElementById('authModalTitle').textContent = '–í—Ö–æ–¥';
        } else {
            loginForm.classList.remove('active');
            registerForm.classList.add('active');
            loginTab.classList.remove('active');
            registerTab.classList.add('active');
            document.getElementById('authModalTitle').textContent = '–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è';
        }
    }

    function updateHeaderForGuest() {
        const headerRight = document.getElementById('headerRight');
        if (headerRight) {
            headerRight.innerHTML = `
                <button class="auth-button" id="loginButton">–í—Ö–æ–¥</button>
                <button class="auth-button" id="registerButton">–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</button>
                <button class="menu-button" id="menuButton">
                    <span></span>
                    <span></span>
                    <span></span>
                </button>
            `;

            setupEventListeners();
        }
    }

    function updateHeaderForUser() {
        const headerRight = document.getElementById('headerRight');
        if (headerRight) {
            headerRight.innerHTML = `
                <div class="user-profile" id="userProfile">
                    <div class="user-avatar">${currentUser.name.charAt(0).toUpperCase()}</div>
                    <span>${currentUser.name}</span>
                </div>
                <button class="logout-button" id="logoutButton">–í—ã—Ö–æ–¥</button>
                <button class="menu-button" id="menuButton">
                    <span></span>
                    <span></span>
                    <span></span>
                </button>
            `;

            setupEventListeners();
        }
    }

    function handleLogout() {
        localStorage.removeItem('currentUser');
        currentUser = null;
        updateHeaderForGuest();
        alert('–í—ã —É—Å–ø–µ—à–Ω–æ –≤—ã—à–ª–∏ –∏–∑ —Å–∏—Å—Ç–µ–º—ã!');
    }

    function handleLogin(event) {
        event.preventDefault();
        const email = document.getElementById('loginEmail').value;
        const password = document.getElementById('loginPassword').value;

        const users = JSON.parse(localStorage.getItem('users')) || [];
        const user = users.find(u => u.email === email && u.password === password);

        if (user) {
            currentUser = user;
            localStorage.setItem('currentUser', JSON.stringify(currentUser));
            updateHeaderForUser();
            closeAuthModal();
            alert('–í—ã —É—Å–ø–µ—à–Ω–æ –≤–æ—à–ª–∏ –≤ —Å–∏—Å—Ç–µ–º—É!');
        } else {
            alert('–ù–µ–≤–µ—Ä–Ω—ã–π email –∏–ª–∏ –ø–∞—Ä–æ–ª—å!');
        }
    }

    function handleRegister(event) {
        event.preventDefault();
        const name = document.getElementById('registerName').value;
        const email = document.getElementById('registerEmail').value;
        const password = document.getElementById('registerPassword').value;
        const confirmPassword = document.getElementById('registerConfirmPassword').value;

        if (password !== confirmPassword) {
            alert('–ü–∞—Ä–æ–ª–∏ –Ω–µ —Å–æ–≤–ø–∞–¥–∞—é—Ç!');
            return;
        }

        const users = JSON.parse(localStorage.getItem('users')) || [];
        const userExists = users.some(u => u.email === email);
        if (userExists) {
            alert('–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å —Ç–∞–∫–∏–º email —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç!');
            return;
        }

        const newUser = { name, email, password };
        users.push(newUser);
        localStorage.setItem('users', JSON.stringify(users));

        currentUser = newUser;
        localStorage.setItem('currentUser', JSON.stringify(currentUser));
        updateHeaderForUser();
        closeAuthModal();
        alert('–í—ã —É—Å–ø–µ—à–Ω–æ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–ª–∏—Å—å!');
    }

    // –ö—É—Ä—Å –≤–∞–ª—é—Ç
    async function updateCurrencyData() {
        try {
            const response = await fetch('https://www.cbr-xml-daily.ru/daily_json.js');
            const data = await response.json();

            const rates = {
                USD: data.Valute.USD.Value.toFixed(2),
                EUR: data.Valute.EUR.Value.toFixed(2),
                GBP: data.Valute.GBP.Value.toFixed(2),
                CNY: data.Valute.CNY.Value.toFixed(2)
            };

            document.getElementById('usdRate').textContent = rates.USD + ' RUB';
            document.getElementById('eurRate').textContent = rates.EUR + ' RUB';
            document.getElementById('gbpRate').textContent = rates.GBP + ' RUB';
            document.getElementById('cnyRate').textContent = rates.CNY + ' RUB';

            const date = new Date(data.Date.replace(/(\d+).(\d+).(\d+)/, '$3-$2-$1'));
            if (document.getElementById('currencyDate')) {
                document.getElementById('currencyDate').textContent = `–î–∞–Ω–Ω—ã–µ –Ω–∞ ${date.toLocaleDateString('ru-RU')} ${date.toLocaleTimeString('ru-RU', { hour: '2-digit', minute: '2-digit' })}`;
            }
        } catch (error) {
            console.error('–û—à–∏–±–∫–∞ –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ –∫—É—Ä—Å–∞ –≤–∞–ª—é—Ç:', error);
            alert('–ù–µ —É–¥–∞–ª–æ—Å—å –ø–æ–ª—É—á–∏—Ç—å –∞–∫—Ç—É–∞–ª—å–Ω—ã–µ –∫—É—Ä—Å—ã –≤–∞–ª—é—Ç. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ —Å –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–æ–º.');
        }
    }

    // –ü–æ–≥–æ–¥–∞
    async function updateWeatherData() {
        const cities = [
            { name: '–ú–æ—Å–∫–≤–∞', id: 'moscowWeather', lat: 55.7558, lon: 37.6176 },
            { name: '–°–∞–Ω–∫—Ç-–ü–µ—Ç–µ—Ä–±—É—Ä–≥', id: 'spbWeather', lat: 59.9343, lon: 30.3351 },
            { name: '–ù–æ–≤–æ—Å–∏–±–∏—Ä—Å–∫', id: 'novosibirskWeather', lat: 55.0084, lon: 82.9357 },
            { name: '–ï–∫–∞—Ç–µ—Ä–∏–Ω–±—É—Ä–≥', id: 'yekaterinburgWeather', lat: 56.8389, lon: 60.6057 }
        ];

        const apiKey = 'YOUR_OPENWEATHERMAP_API_KEY'; // –ó–∞–º–µ–Ω–∏—Ç–µ –Ω–∞ –≤–∞—à –∫–ª—é—á API

        const date = new Date();
        if (document.getElementById('weatherDate')) {
            document.getElementById('weatherDate').textContent = `–î–∞–Ω–Ω—ã–µ –Ω–∞ ${date.toLocaleDateString('ru-RU')} ${date.toLocaleTimeString('ru-RU', { hour: '2-digit', minute: '2-digit' })}`;
        }

        for (const city of cities) {
            try {
                const response = await fetch(`https://api.openweathermap.org/data/2.5/weather?lat=${city.lat}&lon=${city.lon}&appid=${apiKey}&units=metric&lang=ru`);
                const data = await response.json();

                const temp = Math.round(data.main.temp);
                const feelsLike = Math.round(data.main.feels_like);
                const description = data.weather[0].description;
                const emoji = getWeatherEmoji(data.weather[0].main);

                if (document.getElementById(city.id)) {
                    document.getElementById(city.id).innerHTML = `${temp}¬∞C, –æ—â—É—â–∞–µ—Ç—Å—è –∫–∞–∫ ${feelsLike}¬∞C, ${description} ${emoji}`;
                }
            } catch (error) {
                console.error(`–û—à–∏–±–∫–∞ –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ –ø–æ–≥–æ–¥—ã –¥–ª—è ${city.name}:`, error);
                if (document.getElementById(city.id)) {
                    document.getElementById(city.id).textContent = '–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏';
                }
            }
        }
    }

    function getWeatherEmoji(weather) {
        const emojis = {
            'Clear': '‚òÄÔ∏è',
            'Clouds': '‚òÅÔ∏è',
            'Rain': 'üåßÔ∏è',
            'Drizzle': 'üå¶Ô∏è',
            'Thunderstorm': '‚õàÔ∏è',
            'Snow': '‚ùÑÔ∏è',
            'Mist': 'üå´Ô∏è',
            'Smoke': 'üå´Ô∏è',
            'Haze': 'üå´Ô∏è',
            'Fog': 'üå´Ô∏è'
        };
        return emojis[weather] || 'üå¶Ô∏è';
    }

    // –ó–∞–∫—Ä—ã—Ç–∏–µ –º–æ–¥–∞–ª—å–Ω—ã—Ö –æ–∫–æ–Ω –ø—Ä–∏ –∫–ª–∏–∫–µ –≤–Ω–µ –∏—Ö
    window.addEventListener('click', (event) => {
        const currencyModal = document.getElementById('currencyModal');
        const weatherModal = document.getElementById('weatherModal');
        const authModal = document.getElementById('authModal');

        if (currencyModal && event.target === currencyModal) {
            closeModal('currency');
        }
        if (weatherModal && event.target === weatherModal) {
            closeModal('weather');
        }
        if (authModal && event.target === authModal) {
            closeAuthModal();
        }
    });
</script>
<script>
    let currentUser = null;

    // –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ª–∏—á–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ localStorage –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
    document.addEventListener('DOMContentLoaded', function() {
        const userData = localStorage.getItem('currentUser');
        if (userData) {
            currentUser = JSON.parse(userData);
            updateHeaderForUser();
        } else {
            updateHeaderForGuest();
        }
    });

    function updateHeaderForGuest() {
        const headerRight = document.getElementById('headerRight');
        headerRight.innerHTML = `
            <button class="auth-button" id="loginButton">–í—Ö–æ–¥</button>
            <button class="auth-button" id="registerButton">–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</button>
            <button class="menu-button" id="menuButton">
                <span></span>
                <span></span>
                <span></span>
            </button>
        `;

        document.getElementById('loginButton').addEventListener('click', () => {
            showAuthModal('login');
        });

        document.getElementById('registerButton').addEventListener('click', () => {
            showAuthModal('register');
        });

        document.getElementById('menuButton').addEventListener('click', () => {
            menu.classList.toggle('show');
        });
    }

    function updateHeaderForUser() {
        const headerRight = document.getElementById('headerRight');
        headerRight.innerHTML = `
            <div class="user-profile" id="userProfile">
                <div class="user-avatar">${currentUser.name.charAt(0).toUpperCase()}</div>
                <span>${currentUser.name}</span>
            </div>
            <button class="logout-button" id="logoutButton">–í—ã—Ö–æ–¥</button>
            <button class="menu-button" id="menuButton">
                <span></span>
                <span></span>
                <span></span>
            </button>
        `;

        document.getElementById('logoutButton').addEventListener('click', handleLogout);
        document.getElementById('menuButton').addEventListener('click', () => {
            menu.classList.toggle('show');
        });
    }

    function handleLogout() {
        localStorage.removeItem('currentUser');
        currentUser = null;
        updateHeaderForGuest();
        alert('–í—ã —É—Å–ø–µ—à–Ω–æ –≤—ã—à–ª–∏ –∏–∑ —Å–∏—Å—Ç–µ–º—ã!');
    }

    const menu = document.getElementById('menu');
    const authModal = document.getElementById('authModal');

    function showAuthModal(tab) {
        authModal.classList.add('show');
        showAuthTab(tab);
    }

    function closeAuthModal() {
        authModal.classList.remove('show');
    }

    function showAuthTab(tab) {
        const loginForm = document.getElementById('loginForm');
        const registerForm = document.getElementById('registerForm');
        const loginTab = document.querySelector('.auth-tab:nth-child(1)');
        const registerTab = document.querySelector('.auth-tab:nth-child(2)');

        if (tab === 'login') {
            loginForm.classList.add('active');
            registerForm.classList.remove('active');
            loginTab.classList.add('active');
            registerTab.classList.remove('active');
            document.getElementById('authModalTitle').textContent = '–í—Ö–æ–¥';
        } else {
            loginForm.classList.remove('active');
            registerForm.classList.add('active');
            loginTab.classList.remove('active');
            registerTab.classList.add('active');
            document.getElementById('authModalTitle').textContent = '–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è';
        }
    }

    function handleLogin(event) {
        event.preventDefault();
        const email = document.getElementById('loginEmail').value;
        const password = document.getElementById('loginPassword').value;

        // –ü–æ–ª—É—á–∞–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∏–∑ localStorage
        const users = JSON.parse(localStorage.getItem('users')) || [];

        // –ò—â–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å —Ç–∞–∫–∏–º email –∏ –ø–∞—Ä–æ–ª–µ–º
        const user = users.find(u => u.email === email && u.password === password);

        if (user) {
            // –°–æ—Ö—Ä–∞–Ω—è–µ–º —Ç–µ–∫—É—â–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
            currentUser = user;
            localStorage.setItem('currentUser', JSON.stringify(currentUser));

            // –û–±–Ω–æ–≤–ª—è–µ–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
            updateHeaderForUser();
            closeAuthModal();
            alert('–í—ã —É—Å–ø–µ—à–Ω–æ –≤–æ—à–ª–∏ –≤ —Å–∏—Å—Ç–µ–º—É!');
        } else {
            alert('–ù–µ–≤–µ—Ä–Ω—ã–π email –∏–ª–∏ –ø–∞—Ä–æ–ª—å!');
        }
    }

    function handleRegister(event) {
        event.preventDefault();
        const name = document.getElementById('registerName').value;
        const email = document.getElementById('registerEmail').value;
        const password = document.getElementById('registerPassword').value;
        const confirmPassword = document.getElementById('registerConfirmPassword').value;

        if (password !== confirmPassword) {
            alert('–ü–∞—Ä–æ–ª–∏ –Ω–µ —Å–æ–≤–ø–∞–¥–∞—é—Ç!');
            return;
        }

        // –ü–æ–ª—É—á–∞–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∏–∑ localStorage
        const users = JSON.parse(localStorage.getItem('users')) || [];

        // –ü—Ä–æ–≤–µ—Ä—è–µ–º, —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å —Ç–∞–∫–∏–º email
        const userExists = users.some(u => u.email === email);
        if (userExists) {
            alert('–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å —Ç–∞–∫–∏–º email —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç!');
            return;
        }

        // –°–æ–∑–¥–∞–µ–º –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
        const newUser = { name, email, password };

        // –î–æ–±–∞–≤–ª—è–µ–º –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ –º–∞—Å—Å–∏–≤ –∏ —Å–æ—Ö—Ä–∞–Ω—è–µ–º –≤ localStorage
        users.push(newUser);
        localStorage.setItem('users', JSON.stringify(users));

        // –°–æ—Ö—Ä–∞–Ω—è–µ–º —Ç–µ–∫—É—â–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
        currentUser = newUser;
        localStorage.setItem('currentUser', JSON.stringify(currentUser));

        // –û–±–Ω–æ–≤–ª—è–µ–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
        updateHeaderForUser();
        closeAuthModal();
        alert('–í—ã —É—Å–ø–µ—à–Ω–æ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–ª–∏—Å—å!');
    }

    window.addEventListener('click', (event) => {
        const authModal = document.getElementById('authModal');

        if (event.target === authModal) {
            closeAuthModal();
        }
    });
</script>
<script>
    // –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ª–∏—á–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ localStorage –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
    document.addEventListener('DOMContentLoaded', function() {
        const userData = localStorage.getItem('currentUser');
        if (userData) {
            currentUser = JSON.parse(userData);
            updateHeaderForUser();
        } else {
            updateHeaderForGuest();
        }

        setupEventListeners();
    });

    function setupEventListeners() {
        const menuButton = document.getElementById('menuButton');
        if (menuButton) {
            menuButton.addEventListener('click', toggleMenu);
        }
    }

    function toggleMenu() {
        const menu = document.getElementById('menu');
        if (menu) {
            menu.classList.toggle('show');
        }
    }

    function filterNews(category) {
        const newsCards = document.querySelectorAll('.news-card');

        newsCards.forEach(card => {
            const cardCategoryElement = card.querySelector('.news-meta span:first-child');
            if (cardCategoryElement) {
                const cardCategory = cardCategoryElement.textContent.trim();
                if (category === '' || cardCategory === category) {
                    card.style.display = 'block';
                } else {
                    card.style.display = 'none';
                }
            }
        });

        // –ó–∞–∫—Ä—ã–≤–∞–µ–º –º–µ–Ω—é –ø–æ—Å–ª–µ –≤—ã–±–æ—Ä–∞ —Ñ–∏–ª—å—Ç—Ä–∞
        const menu = document.getElementById('menu');
        if (menu && menu.classList.contains('show')) {
            menu.classList.remove('show');
        }
    }

    function openModal(modalId) {
        const modal = document.getElementById(modalId + 'Modal');
        const menu = document.getElementById('menu');
        const authModal = document.getElementById('authModal');

        if (modal) {
            modal.classList.add('show');
        }

        if (menu && menu.classList.contains('show')) {
            menu.classList.remove('show');
        }

        if (authModal && authModal.classList.contains('show')) {
            closeAuthModal();
        }

        if (modalId === 'currency' && modal) {
            updateCurrencyData();
        } else if (modalId === 'weather' && modal) {
            updateWeatherData();
        }
    }

    function closeModal(modalId) {
        const modal = document.getElementById(modalId + 'Modal');
        if (modal) {
            modal.classList.remove('show');
        }
    }

    // –û—Å—Ç–∞–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ (updateCurrencyData, updateWeatherData –∏ —Ç.–¥.) –æ—Å—Ç–∞—é—Ç—Å—è –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π
</script>

</body>
</html>
